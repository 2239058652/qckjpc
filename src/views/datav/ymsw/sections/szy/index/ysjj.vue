<template>
  <dv-border-box-11 title="用水结构同比" class="datav-border-box-content">
    <div class="datav-border-box-content-container">
      <div id="ysjjtbchart" class="cellChartContainer"> </div>
    </div>
  </dv-border-box-11>
  <!-- 使用echarts大小无法自适应，暂时修改为使用datav中的动态环图显示 -->
  <!-- <div class="cell-container">
    <div class="cell-header">水利工程</div>
    <div class="cell-content-container" id="echartPieContainer"> </div>
  </div> -->
  <!-- 动态环图 -->
  <!-- <div class="cell-container">
    <div class="cell-header">水利工程进度</div>
    <div class="cell-content-container">
      <dv-active-ring-chart class="cell-content" :config="config5" />
    </div>
  </div> -->
</template>
<script lang="ts">
  import { onMounted } from 'vue';
  import * as echarts from 'echarts';

  export default {
    setup() {
      const option = {
        legend: { textStyle: { color: '#fff' } },
        tooltip: {},
        dataset: {
          source: [
            [
              'product',
              '农业用水（亿m³）',
              '工业用水（亿m³）',
              '生活用水（亿m³）',
              '生态用水（亿m³）',
            ],
            ['2019', 2.0, 0.5, 1.88, 2.01],
            ['2020', 2.2, 0.52, 1.9, 2.03],
            ['2021', 2.4, 0.54, 1.9, 2.05],
            ['2022', 2.06, 0.58, 1.91, 2.08],
            ['2023', 2.12, 0.6, 1.92, 2.2],
          ],
        },
        xAxis: { type: 'category' },
        yAxis: {},
        // Declare several bar series, each will be mapped
        // to a column of dataset.source by default.
        series: [{ type: 'bar' }, { type: 'bar' }, { type: 'bar' }, { type: 'bar' }],
      };

      onMounted(() => {
        var chartDom = document.getElementById('ysjjtbchart')!;
        // console.log(chartDom);
        var myChart = echarts.init(chartDom);
        myChart.setOption(option);
        myChart.resize();
      });
      return { option };
    },
  };
</script>
<style lang="less">
  @import '../../../layouts/layout.less';
</style>
